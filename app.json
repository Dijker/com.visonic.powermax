{
	"id": "com.visonic.powermax",
    "name": {
        "en": "Visonic PowerMax"
    },
    "version": "0.5.0",
	"compatibility": ">=0.9.2",
	"description": {
		"en": "Control your Visonic PowerMax via Homey",
		"nl": "Bestuur je Visonic PowerMax met Homey"
	},
	"author": {
		"name": "Ram√≥n Baas",
		"website": "http://www.visonic.com/"
	},
	"category": "security",
	"images": {
		"large": "assets/images/large.png",
		"small": "assets/images/small.png"
	},
	"capabilities": {
		"nready": {
			"type": "boolean",
			"title": { "en": "Not ready", "nl": "Niet klaar" },
			"getable": true,
			"setable": false
		},
		"trouble": {
			"type": "boolean",
			"title": { "en": "Panel trouble", "nl": "Paneelfout" },
			"getable": true,
			"setable": false
		},
		"alarm": {
			"type": "boolean",
			"title": { "en": "Alarm" },
			"getable": true,
			"setable": false
		},
		"memory": {
			"type": "boolean",
			"title": { "en": "Alarm in memory", "nl": "Alarm in geheugen" },
			"getable": true,
			"setable": false
		}
	},
	"drivers": [
		{
			"id": "powermax",
			"name": {
				"en": "Alarm Panel",
				"nl": "Alarmsysteem"
			},
			"class": "homealarm",
			"capabilities": [ "homealarm_state", "nready", "trouble", "alarm", "memory" ],
			"mobile": {
				"components": [
					{
						"id": "icon",
						"capabilities": []
					},
					{
						"id": "ternary",
						"capabilities": [ "homealarm_state" ],
						"options": {
							"icons": {
								"top": "./drivers/powermax/assets/armed.svg",
								"middle": "./drivers/powermax/assets/armedhome.svg",
								"bottom": "./drivers/powermax/assets/disarmed.svg"
							},
							"values": {
								"top": "armed",
								"middle": "partially_armed",
								"bottom": "disarmed"
							}
						}
					},
					{
						"id": "sensor",
						"capabilities": [ "nready", "trouble", "alarm", "memory" ],
						"options": {
							"icons": {
								"nready": "./drivers/powermax/assets/nready.svg",
								"trouble": "./drivers/powermax/assets/trouble.svg",
								"alarm": "./drivers/powermax/assets/alarm.svg",
								"memory": "./drivers/powermax/assets/memory.svg"
							}
						}
					}
				]
			},
			"images": {
				"large": "drivers/powermax/assets/images/large.png",
				"small": "drivers/powermax/assets/images/small.png"
			},
			"pair": [
				{ "id": "powermax" },
				{ "id": "download" }
			],
			"settings": [
                {
                    "type": "group",
                    "label": {
                        "en": "Network settings",
						"nl": "Netwerk instellingen"
                    },
					"children": [
                        {
                            "id": "ip",
                            "type": "text",
                            "label": {
                                "en": "IP address",
								"nl": "IP adres"
                            },
                            "value": "0.0.0.0"
                        },
						{
                            "id": "port",
                            "type": "number",
                            "label": {
                                "en": "IP port number",
								"nl": "IP poort nummer"
                            },
                            "value": 23,
							"attr": {
								"min": 0,
								"max": 65535
							}
                        }
					]
				},
				{
                    "type": "group",
                    "label": {
                        "en": "Panel options in Homey",
						"nl": "Paneel opties in Homey"
                    },
					"children": [
						{
							"id": "allowArm",
							"type": "radio",
							"value": "all",
							"label": {
								"en": "Allow flow arming & disarming",
								"nl": "In- en uitschakelen vanuit Flow toestaan"
							},
							"values": [
								{
									"id": "none",
									"label": {
										"en": "No arm/disarm allowed",
										"nl": "In-/uitschakelen niet toestaan"
									}
								},
								{
									"id": "stay",
									"label": {
										"en": "Only arm away allowed",
										"nl": "Alleen deel-inschakelen toestaan"
									}
								},
								{
									"id": "arm",
									"label": {
										"en": "Arm (Home) allowed",
										"nl": "Inschakelen toestaan"
									}
								},
								{
									"id": "all",
									"label": {
										"en": "Arm & disarm allowed",
										"nl": "In- en uitschakelen toestaan"
									}
								}
							]
						},
						{
                            "id": "motionTime",
                            "type": "number",
                            "label": {
                                "en": "Seconds to show motion detected",
								"nl": "Aantal seconden dat beweging actief blijft"
                            },
                            "value": 8,
							"attr": {
								"min": 1,
								"max": 120
							}
                        },
                        {
                            "id": "syncTime",
                            "type": "checkbox",
                            "label": {
                                "en": "Synchronize panel time from Homey",
								"nl": "Synchonizeer Homey tijd met paneel"
                            },
                            "value": true
                        }
					]
				}
			]
		},
		{
			"id": "contact",
			"name": {
				"en": "Door/Window Sensor",
				"nl": "Deur-/Raamsensor"
			},
			"class": "sensor",
			"capabilities": [ "alarm_contact", "alarm_battery" ],
			"images": {
				"large": "drivers/contact/assets/images/large.png",
				"small": "drivers/contact/assets/images/small.png"
			},
			"pair": [
				{
					"id": "select",
					"navigation": {
						"next": "list_sensors"
					}
				},
				{
					"id": "list_sensors",
					"template": "list_devices",
					"navigation": {
						"next": "add_sensors"
					}
				},
				{
					"id": "add_sensors",
					"template": "add_devices"
				}
			]
		},
		{
			"id": "motion",
			"name": {
				"en": "Motion Sensor",
				"nl": "Bewegingssensor"
			},
			"class": "sensor",
			"capabilities": [ "alarm_motion", "alarm_battery" ],
			"images": {
				"large": "drivers/motion/assets/images/large.png",
				"small": "drivers/motion/assets/images/small.png"
			},
			"pair": [
				{
					"id": "select",
					"navigation": {
						"next": "list_sensors"
					}
				},
				{
					"id": "list_sensors",
					"template": "list_devices",
					"navigation": {
						"next": "add_sensors"
					}
				},
				{
					"id": "add_sensors",
					"template": "add_devices"
				}
			]
		},
		{
			"id": "smoke",
			"name": {
				"en": "Smoke Detector",
				"nl": "Rookmelder"
			},
			"class": "sensor",
			"capabilities": [ "alarm_smoke", "alarm_battery" ],
			"images": {
				"large": "drivers/smoke/assets/images/large.png",
				"small": "drivers/smoke/assets/images/small.png"
			},
			"pair": [
				{
					"id": "select",
					"navigation": {
						"next": "list_sensors"
					}
				},
				{
					"id": "list_sensors",
					"template": "list_devices",
					"navigation": {
						"next": "add_sensors"
					}
				},
				{
					"id": "add_sensors",
					"template": "add_devices"
				}
			]
		}
	],
	"flow": {
		"triggers": [
			{
				"id": "status",
				"title": {
					"en": "Status changes",
					"nl": "Status verandert"
				},
                "args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    }
                ],
				"tokens": [
					{
						"name": "status",
						"title": { 
							"en": "Status"
						}
					}
				]
			},
			{
				"id": "zonealarm",
				"title": {
					"en": "Zone alarm becomes",
					"nl": "Zone alarm wordt"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    },
					{
						"name": "values",
						"type": "dropdown",
						"values": [
							{
								"id": "on",
								"label": {
										"en": "active",
										"nl": "actief"
								}
							},
							{
								"id": "off",
								"label": {
										"en": "inactive",
										"nl": "inactief"
								}
							}
						]
					}
				],
				"tokens": [
					{
						"name": "zone",
						"title": { 
							"en": "Zone number",
							"nl": "Zone nummer"
						}
					},
					{
						"name": "name",
						"title": { 
							"en": "Name zone",
							"nl": "Naam zone"
						}
					}
				]
			},
			{
				"id": "panelalarm",
				"title": {
					"en": "Panel alarm becomes",
					"nl": "Paneel alarm wordt"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    },
					{
						"name": "values",
						"type": "dropdown",
						"values": [
							{
								"id": "on",
								"label": {
										"en": "active",
										"nl": "actief"
								}
							},
							{
								"id": "off",
								"label": {
										"en": "inactive",
										"nl": "inactief"
								}
							}
						]
					}
				],
				"tokens": [
					{
						"name": "type",
						"title": { 
							"en": "Type"
						}
					},
					{
						"name": "name",
						"title": { 
							"en": "Alarm type name",
							"nl": "Naam alarm type"
						}
					}
				]
			},
			{
				"id": "paneltrouble",
				"title": {
					"en": "Panel trouble becomes",
					"nl": "Paneel probleem wordt"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    },
					{
						"name": "values",
						"type": "dropdown",
						"values": [
							{
								"id": "on",
								"label": {
										"en": "active",
										"nl": "actief"
								}
							},
							{
								"id": "off",
								"label": {
										"en": "inactive",
										"nl": "inactief"
								}
							}
						]
					}
				],
				"tokens": [
					{
						"name": "type",
						"title": { 
							"en": "Type"
						}
					},
					{
						"name": "name",
						"title": { 
							"en": "Trouble type name",
							"nl": "Naam probleem"
						}
					}
				]
			},
			{
				"id": "battery",
				"title": {
					"en": "Low battery",
					"nl": "Lage batterijspanning"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    },
					{
						"name": "values",
						"type": "dropdown",
						"values": [
							{
								"id": "on",
								"label": {
										"en": "active",
										"nl": "actief"
								}
							},
							{
								"id": "off",
								"label": {
										"en": "inactive",
										"nl": "inactief"
								}
							}
						]
					}
				],
				"tokens": [
					{
						"name": "zone",
						"title": { 
							"en": "Zone number",
							"nl": "Zone nummer"
						}
					},
					{
						"name": "name",
						"title": { 
							"en": "Name zone",
							"nl": "Naam zone"
						}
					}
				]
			}
		],
		"conditions": [
			{
				"id": "sysflags",
				"title": {
					"en": "Panel !{{indicates|doesn't indicate}}",
					"nl": "Paneel !{{geeft aan|geeft niet aan}}"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    },
					{
						"name": "flag",
						"type": "dropdown",
						"values": [
							{
								"id": "ready",
								"label": {
										"en": "ready for use",
										"nl": "klaar voor gebruik"
								}
							},
							{
								"id": "trouble",
								"label": {
										"en": "there is trouble",
										"nl": "er is een probleem"
								}
							},
							{
								"id": "alarm",
								"label": {
										"en": "an alarm is active",
										"nl": "een alarm is actief"
								}
							},
							{
								"id": "memory",
								"label": {
										"en": "an alarm in memory",
										"nl": "een alarm in geheugen"
								}
							}
						]
					}
				]
			}
		],
		"actions": [
			{
				"id": "setClock",
				"title": {
					"en": "Set current time",
					"nl": "Zet huidige tijd"
				},
				"args": [
                    {
                        "name": "device",
                        "type": "device",
						"filter": "driver_id=powermax"
                    }
				]
			}
		]
    },
	"permissions": [
        "homey:manager:speech-output"
    ],
	"dependencies": {
		"visonic-api": "*"
	}
}
